{% extends 'base.html.twig' %}
{% block title %}Événements · GoRun{% endblock %}
{% block body %}
<section class="px-0 py-6 bg-white border rounded-2xl">
  <div class="max-w-6xl mx-auto grid gap-4 md:grid-cols-4 p-4">
    <input placeholder="Rechercher un évènement, une ville…"
           class="px-4 py-3 rounded-2xl border focus:outline-none focus:ring-2 focus:ring-green-500" />
    <select class="px-4 py-3 rounded-2xl border focus:outline-none focus:ring-2 focus:ring-green-500">
      <option>Toutes les villes</option>
      <option>Paris</option><option>Lyon</option><option>Marseille</option>
    </select>
    <select class="px-4 py-3 rounded-2xl border focus:outline-none focus:ring-2 focus:ring-green-500">
      <option>Tous niveaux</option><option>Débutant</option><option>Intermédiaire</option><option>Avancé</option>
    </select>
    <a href="{{ path('event_new') }}" class="px-4 py-3 rounded-2xl bg-green-600 text-white text-center font-semibold hover:bg-green-700">Proposer un évènement</a>
  </div>
</section>

{% set events = [
  { 'id':'paris-montsouris-10k', 'title':"Sortie 10K – Parc Montsouris", 'city':"Paris", 'date':"2025-10-12T09:00:00", 'distanceKm':10, 'pace':"5'30/km", 'spotsLeft':8, 'cover':"https://images.unsplash.com/photo-1546483875-ad9014c88eba?q=80&w=1200&auto=format&fit=crop" },
  { 'id':'lyon-berges-5k', 'title':"Jogging convivial – Berges du Rhône (5K)", 'city':"Lyon", 'date':"2025-10-18T19:00:00", 'distanceKm':5, 'pace':"6'00/km", 'spotsLeft':14, 'cover':"https://images.unsplash.com/photo-1535747790212-30c585ab486d?q=80&w=1200&auto=format&fit=crop" },
  { 'id':'marseille-calanques-trail', 'title':"Trail découverte – Calanques (12K)", 'city':"Marseille", 'date':"2025-11-02T08:30:00", 'distanceKm':12, 'pace':"6'15/km", 'spotsLeft':5, 'cover':"https://images.unsplash.com/photo-1461896836934-ffe607ba8211?q=80&w=1200&auto=format&fit=crop" }
] %}

<main class="py-10">
  <h1 class="text-2xl md:text-3xl font-bold mb-6">Tous les événements</h1>
  <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for e in events %}
      <article class="bg-white rounded-2xl shadow hover:shadow-lg transition overflow-hidden flex flex-col h-full">
        <img src="{{ e.cover }}" alt="" class="h-40 w-full object-cover" />

        <div class="p-5 flex flex-col flex-1">
          <h2 class="text-lg font-semibold mb-1 line-clamp-2">{{ e.title }}</h2>
          <p class="text-sm text-gray-600 mb-3">
            {{ e.date|date('l d F H:i')|capitalize }} • {{ e.city }} • {{ e.distanceKm }}K • Allure {{ e.pace }}
          </p>

          <div class="mt-auto flex items-center justify-between">
            <span class="text-sm text-gray-700">
              {% if e.spotsLeft == 0 %}Complet{% else %}{{ e.spotsLeft }} places restantes{% endif %}
            </span>
            <a href="{{ path('event_show', {id: e.id}) }}" class="text-green-600 font-medium hover:underline">
              Voir le détail →
            </a>
          </div>
        </div>
      </article>
    {% endfor %}
  </div>
</main>
{% endblock %}
