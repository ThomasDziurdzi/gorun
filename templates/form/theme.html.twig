{% use "form_div_layout.html.twig" %}

{# ========================================
   ERREURS DE CHAMP (en rouge)
   ======================================== #}
{% block form_errors %}
    {% if errors|length > 0 %}
        <div class="mt-1 space-y-1">
            {% for error in errors %}
                <div class="flex items-start">
                    <svg class="w-4 h-4 text-red-600 mt-0.5 mr-1.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"/>
                    </svg>
                    <p class="text-sm text-red-600 font-medium">
                        {{ error.message }}
                    </p>
                </div>
            {% endfor %}
        </div>
    {% endif %}
{% endblock %}

{# ========================================
   WIDGET INPUT (bordure rouge si erreur)
   ======================================== #}
{% block form_widget_simple %}
    {% set attr = attr|merge({
        class: (attr.class|default('') ~ ' ' ~ (form.vars.errors|length > 0 ? 'border-red-500 focus:border-red-500 focus:ring-red-500' : ''))|trim
    }) %}
    {{- parent() -}}
{% endblock %}

{# ========================================
   WIDGET TEXTAREA (bordure rouge si erreur)
   ======================================== #}
{% block textarea_widget %}
    {% set attr = attr|merge({
        class: (attr.class|default('') ~ ' ' ~ (form.vars.errors|length > 0 ? 'border-red-500 focus:border-red-500 focus:ring-red-500' : ''))|trim
    }) %}
    {{- parent() -}}
{% endblock %}

{# ========================================
   LABEL (rouge si erreur)
   ======================================== #}
{% block form_label %}
    {% if label is not same as(false) %}
        {% set label_attr = label_attr|merge({
            class: (label_attr.class|default('') ~ ' ' ~ (form.vars.errors|length > 0 ? 'text-red-700' : ''))|trim
        }) %}
    {% endif %}
    {{- parent() -}}
{% endblock %}